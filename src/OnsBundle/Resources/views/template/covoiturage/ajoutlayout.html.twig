

{% trans_default_domain 'FOSUserBundle' %}

{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}




    <!DOCTYPE html>
    <html>
    <head>
        <title>Ajouter Covoiturage</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="keywords" content="Visitors Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
        <!-- bootstrap-css -->
        <link rel="stylesheet" href="{{ asset('bundles/covoiturage/css/bootstrap.min.css')}}" >
        <!-- //bootstrap-css -->
        <!-- Custom CSS -->
        <link href="{{ asset('bundles/covoiturage/css/style.css')}}" rel='stylesheet' type='text/css' />
        <link href="{{ asset('bundles/covoiturage/css/style-responsive.css')}}" rel="stylesheet"/>
        <!-- font CSS -->
        <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
        <!-- font-awesome icons -->
        <link rel="stylesheet" href="{{ asset('bundles/covoiturage/css/font.css')}}" type="text/css"/>
        <link href="{{ asset('bundles/covoiturage/css/font-awesome.css')}}" rel="stylesheet">
        <link rel="stylesheet" href="{{ asset('bundles/covoiturage/css/morris.css')}}" type="text/css"/>
        <!-- calendar -->
        <link rel="stylesheet" href="{{ asset('bundles/covoiturage/css/monthly.css')}}">
        <!-- //calendar -->
        <!-- //font-awesome icons -->
        <script src="{{ asset('bundles/covoiturage/js/jquery2.0.3.min.js')}}"></script>
        <script src="{{ asset('bundles/covoiturage/js/raphael-min.js')}}"></script>
        <script src="{{ asset('bundles/covoiturage/js/morris.js')}}"></script>
        <script src="{{ asset('js/jquery.js')}}"></script>





        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="keywords" content="Emphasize Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, Sony Ericsson, Motorola web design" />
        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
            function hideURLbar(){ window.scrollTo(0,1); } </script>
        <!-- // custom-theme -->
        <!--css links-->
        <link href="{{ asset('bundles/Etudiant/css/bootstrap.css') }}" rel="stylesheet" type="text/css" media="all" /><!--bootstrap-->
        <link href="{{ asset('bundles/Etudiant/css/font-awesome.css') }}" rel="stylesheet"><!--font-awesome-->
        <link href="{{ asset('bundles/Etudiant/css/style.css')}}" rel="stylesheet" type="text/css" media="all" /><!--stylesheet-->
        <!--//css links-->
        <!--fonts-->
        <link href="//fonts.googleapis.com/css?family=Raleway:200,300,400,500,600,700" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">









    </head>
    <body>
    <div id="container">
        <!--header start-->

        <!--header end-->
        <!--sidebar start-->

        <!--sidebar end-->
        <!--main content start-->

        <div class="stats-agileits" id="stats">
            <div class="container">



                <!-- //market-->
                <div class="row">
                    <div class="panel-body">
                        <div class="col-md-12 w3ls-graph">
                            <!--agileinfo-grap-->





                            <!--form ajout-->


                            <div class="col-lg-12">
                                <section class="panel">
                                    <header class="panel-heading">
                                        ajouter une annonces
                                        <span class="tools pull-right">
                                <a class="fa fa-chevron-down" href="javascript:;"></a>
                                <a class="fa fa-cog" href="javascript:;"></a>
                                <a class="fa fa-times" href="javascript:;"></a>
                             </span>
                                    </header>
                                    <div class="panel-body">

                                        <div class="form">
                                            <form class="cmxform form-horizontal " id="signupForm" method="POST" action="{{ path('covoiturage_new') }}">

                                                <script type="text/javascript" src="{{ asset('js/jquery-3.1.1.min.js') }}"></script>

                                                <script type="text/javascript">
                                                    $(function () {
                                                        var mapOptions = {
                                                            center: new google.maps.LatLng(36.8, 10.1),
                                                            zoom: 7,
                                                            mapTypeId: google.maps.MapTypeId.ROADMAP
                                                        };

                                                        var infoWindow = new google.maps.InfoWindow();
                                                        var latlngbounds = new google.maps.LatLngBounds();
                                                        var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
                                                        google.maps.event.addListener(map,
                                                            'click',
                                                            function (e) {

                                                                // alert("Latitude: " + e.latLng.lat() + "\r\nLongitude: " + e.latLng.lng());
                                                                document.getElementById("lat").value = e.latLng.lat();
                                                                document.getElementById("long").value = e.latLng.lng();
                                                                //document.getElementById("p2").innerHTML = e.latLng.lng();

                                                            });
                                                        markerdepart = new google.maps.Marker({
                                                            map: map,
                                                            draggable: true,
                                                            animation: google.maps.Animation.DROP,
                                                            position: { lat: 36.8, lng: 10.1 }
                                                        });
                                                        markerarrive = new google.maps.Marker({
                                                            map: map,
                                                            draggable: true,
                                                            animation: google.maps.Animation.DROP,
                                                            position: { lat: 36.8, lng: 10.1 }
                                                        });
                                                        markerdepart.addListener('click', toggleBounce);
                                                        markerarrive.addListener('click', toggleBounce);
                                                        //marker.setPosition(tx);
                                                        google.maps.event.addListener(markerdepart,
                                                            'dragend',
                                                            function () {
                                                                var latdep = markerdepart.getPosition().lat();
                                                                var lngdep = markerdepart.getPosition().lng();
                                                                /*marke
                                                                 $('#lat').val(lat);
                                                                 $('#lng').val(lng);*/
                                                                /*$.ajax({
                                                                 url: "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + lat + "," + lng + "&sensor=true",
                                                                 success: function (res) {
                                                                 console.log(res.results[0].formatted_address);
                                                                 }
                                                                 })*/
                                                                var latlngdep = new google.maps.LatLng(latdep, lngdep);
                                                                var geocoderdep = geocoder = new google.maps.Geocoder();
                                                                geocoderdep.geocode({ 'latLng': latlngdep },
                                                                    function (results, status) {

                                                                        if (status == google.maps.GeocoderStatus.OK) {
                                                                            if (results[1]) {
                                                                                //alert("Location: " + results[1].formatted_address);
                                                                                $(document).find("#cityAdresse").val(results[1].formatted_address);
                                                                                $("#cityAdressearr").val(results[1].formatted_address);
                                                                                $("#laltitudedep").val(results[1].geometry.location.lat());
                                                                                $("#longitudedep").val(results[1].geometry.location.lng());
                                                                            }
                                                                        }
                                                                    });

                                                            });
                                                        google.maps.event.addListener(markerarrive,
                                                            'dragend',
                                                            function () {
                                                                var latarr = markerarrive.getPosition().lat();
                                                                var lngarr = markerarrive.getPosition().lng();
                                                                /*marke
                                                                 $('#lat').val(lat);
                                                                 $('#lng').val(lng);*/
                                                                /*$.ajax({
                                                                 url: "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + lat + "," + lng + "&sensor=true",
                                                                 success: function (res) {
                                                                 console.log(res.results[0].formatted_address);
                                                                 }
                                                                 })*/
                                                                var latlngarr = new google.maps.LatLng(latarr, lngarr);
                                                                var geocoderarr = geocode
                                                                ifr = new google.maps.Geocoder();
                                                                geocoderrr.geocode({ 'latLng': latlngarr },
                                                                    function (results, status) {
                                                                        if  (status == google.maps.GeocoderStatus.OK){
                                                                            if (results[1]) {
                                                                                //alert("Location: " + results[1].formatted_address);
                                                                                $(document).find("#cityAdresse").val(results[1].formatted_address);
                                                                                $("#cityAdressearr").val(results[1].formatted_address);
                                                                                $("#laltitudearr").val(results[1].geometry.location.lat());
                                                                                $("#longitudearr").val(results[1].geometry.location.lng());
                                                                            }
                                                                        }
                                                                    });

                                                            });

                                                        google.maps.event.addListener(markerdepart,
                                                            'tx',
                                                            function () {
                                                                var tx = markerdepart.setPosition().tx();
                                                                $('#tx').val(tx);

                                                            });


                                                        function toggleBounce() {
                                                            if (markerdepart.getAnimation() !== null) {
                                                                markerdepart.setAnimation(null);
                                                            } else {
                                                                markerdepart.setAnimation(google.maps.Animation.BOUNCE);
                                                            }
                                                        }

                                                    });


                                                </script>
                                                <center>
                                                    <div id="dvMap" style="width: 500px; height: 300px;">
                                                    </div>
                                                </center>
                                                <div class="form-group ">

                                                    <label for="firstname" class="control-label col-lg-3">depart</label>
                                                    <div class="col-lg-6">
                                                        <input class=" form-control" id="cityAdressedep" name="Depart" type="text" required>
                                                    </div>
                                                </div>
                                                <div class="form-group ">
                                                    <label for="lastname" class="control-label col-lg-3">arriver</label>
                                                    <div class="col-lg-6">
                                                        <input class=" form-control" id="cityAdressearr" name="Arrive" type="text" required>
                                                    </div>
                                                </div>
                                                <div class="form-group ">
                                                    <label for="lastname" class="control-label col-lg-3">Num-Tel</label>
                                                    <div class="col-lg-6">
                                                        <input class=" form-control" id="numTel" name="NumTel" type="number" required>
                                                    </div>
                                                </div>
                                                <div class="form-group ">
                                                    <label for="username" class="control-label col-lg-3">date depart</label>
                                                    <div class="col-lg-6">
                                                        <input class="form-control" id="datetoday" name="temps" type="date" required>
                                                    </div>
                                                </div>

                                                <script>
                                                   var today = new Date();
                                                   var dd = today.getDate();
                                                   var mm = today.getMonth()+1;
                                                   var yyyy = today.getFullYear();
                                                   if (dd<10){dd='0'+dd}
                                                   if (mm<10){mm='0'+mm}
                                                   today = yyyy + '-' + mm + '-' + dd;
                                                   document.getElementById("datetoday").min=today;
                                                </script>

                                                <div class="form-group ">
                                                    <label for="confirm_password" class="control-label col-lg-3">Type</label>
                                                    <div class="col-lg-6">
                                                        <input class="form-control " id="description" name="type" type="text" required>
                                                    </div>
                                                </div>
                                                <div class="form-group ">
                                                    <label for="email" class="control-label col-lg-3">prix</label>
                                                    <div class="col-lg-6">
                                                        <input class="form-control " id="prix" name="prix" type="number" required>
                                                    </div>
                                                </div>
                                                <div class="form-group ">
                                                    <label for="agree" class="control-label col-lg-3 col-sm-3">nombre places</label>
                                                    <div class="col-lg-6">
                                                        <input class="form-control " id="nombrePlaces" name="nombrePlaces" type="number" required>
                                                    </div>
                                                </div>


                                                <div class="form-group">
                                                    <div class="col-lg-offset-3 col-lg-6">
                                                        <button class="btn btn-primary" type="submit">Save</button>
                                                        <button class="btn btn-default" type="button">Cancel</button>
                                                    </div>
                                                </div>

                                            </form>
                                        </div>






                                    </div>
                                </section>
                            </div>



                        </div>
                    </div>
                    <!--//agileinfo-grap-->








                    <!--//agileinfo-grap-->

                </div>
            </div>
        </div>

        <!-- tasks -->

        <!-- //tasks -->

    </div>
    <!-- footer -->

    <!-- / footer -->
    <!--main content end-->
    </section>
    <script src="{{ asset('bundles/covoiturage/js/bootstrap.js')}}"></script>
    <script src="{{ asset('bundles/covoiturage/js/jquery.dcjqaccordion.2.7.js')}}"></script>
    <script src="{{ asset('bundles/covoiturage/js/scripts.js')}}"></script>
    <script src="{{ asset('bundles/covoiturage/js/jquery.slimscroll.js')}}"></script>
    <script src="{{ asset('bundles/covoiturage/js/jquery.nicescroll.js')}}"></script>
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot-chart/excanvas.min.js"></script><![endif]-->
    <script src="{{ asset('bundles/covoiturage/js/jquery.scrollTo.js')}}"></script>
    <script src="{{ asset('js/jquery.js')}}"></script>
    <!-- morris JavaScript -->
    <script>

jquery(function () {
    $('[type="date"].min-today').prop('min', function(){
        return new Date().toJSON().split('T')[0];
    });
});

        // $(function(){
        //     $('[type="date"].min-today').prop('min', function(){
        //         return new Date().toJSON().split('T')[0];
        //     });
        // });

        $(document).ready(function() {
            //BOX BUTTON SHOW AND CLOSE
            jQuery('.small-graph-box').hover(function() {
                jQuery(this).find('.box-button').fadeIn('fast');
            }, function() {
                jQuery(this).find('.box-button').fadeOut('fast');
            });
            jQuery('.small-graph-box .box-close').click(function() {
                jQuery(this).closest('.small-graph-box').fadeOut(200);
                return false;
            });

            //CHARTS
            function gd(year, day, month) {
                return new Date(year, month - 1, day).getTime();
            }

            graphArea2 = Morris.Area({
                element: 'hero-area',
                padding: 10,
                behaveLikeLine: true,
                gridEnabled: false,
                gridLineColor: '#dddddd',
                axes: true,
                resize: true,
                smooth:true,
                pointSize: 0,
                lineWidth: 0,
                fillOpacity:0.85,
                data: [
                    {period: '2015 Q1', iphone: 2668, ipad: null, itouch: 2649},
                    {period: '2015 Q2', iphone: 15780, ipad: 13799, itouch: 12051},
                    {period: '2015 Q3', iphone: 12920, ipad: 10975, itouch: 9910},
                    {period: '2015 Q4', iphone: 8770, ipad: 6600, itouch: 6695},
                    {period: '2016 Q1', iphone: 10820, ipad: 10924, itouch: 12300},
                    {period: '2016 Q2', iphone: 9680, ipad: 9010, itouch: 7891},
                    {period: '2016 Q3', iphone: 4830, ipad: 3805, itouch: 1598},
                    {period: '2016 Q4', iphone: 15083, ipad: 8977, itouch: 5185},
                    {period: '2017 Q1', iphone: 10697, ipad: 4470, itouch: 2038},

                ],
                lineColors:['#eb6f6f','#926383','#eb6f6f'],
                xkey: 'period',
                redraw: true,
                ykeys: ['iphone', 'ipad', 'itouch'],
                labels: ['All Visitors', 'Returning Visitors', 'Unique Visitors'],
                pointSize: 2,
                hideHover: 'auto',
                resize: true
            });


        });
    </script>
    <!-- calendar -->
    <script type="text/javascript" src="{{ asset('bundles/covoiturage/js/monthly.js')}}"></script>
    <script type="text/javascript">
        $(window).load( function() {

            $('#mycalendar').monthly({
                mode: 'event',

            });

            $('#mycalendar2').monthly({
                mode: 'picker',
                target: '#mytarget',
                setWidth: '250px',
                startHidden: true,
                showTrigger: '#mytarget',
                stylePast: true,
                disablePast: true
            });

            switch(window.location.protocol) {
                case 'http:':
                case 'https:':
                    // running on a server, should be good.
                    break;
                case 'file:':
                    alert('Just a heads-up, events will not work when run locally.');
            }

        });
    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBiPsrwiJnGZmu3MGDppHm8XX8cl9NK25s" type="text/javascript"></script>





    <!-- //calendar -->
    </body>
    </html>



{% else %}
    <h1 style="background-color:Tomato;">vous devez vous connecter pour continuer </h1>
    <a href="{{ path('fos_user_security_login') }}">{{ 'layout.login'|trans({}, 'FOSUserBundle') }}</a>
{% endif %}

